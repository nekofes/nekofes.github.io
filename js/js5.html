<!DOCTYPE html><html lang="ja"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><script>if(self!=top){top.location=self.location;}</script></script><title>Javascript MEMO</title><script type = "text/javascript" src="../o/run_prettify.js"></script><link href = "../o/prettify.css" type="text/css" rel="stylesheet" /><style>.prettyprint ol.linenums > li {list-style-type: decimal; }</style></head><body oncontextmenu='return false;'><table border=0><tr><td><input type=radio id='r1' name='r1' value=0 onchange='f1(0);' checked><label for=0>日本語</label></td><td><input type=radio id='r1' name='r1' value=1 onchange='f1(1);'><label for=1>ENGLISH</label></td></tr></table><input type=hidden id=lang value=0><div id=l0><a href='#' onClick="f2();">戻る</a><br><br><table><tr><td style="font-size:150%;font-wiight:bold;background-color:rgb(143 188 143 / 0.4);">onload</td></tr><tr><td>onloadは「Webページに表示されるすべての読み込みが完了した時点」で処理を行うのが基本です。</td></tr></table><br><table><tr><td style="background-color:rgb(100 149 237 / 0.2);text-align:center;">[動作について]</td></tr><tr><td><div style="background-color:rgb(245 255 250 / 1.0);">(1)エラー発生によるonload処理の中断</div>javascriptエラーが発生した場合は<br>onload処理が実行されないケースがあります。<br>(例)<br>指定したタグidが存在しないのに指定したことでjavascriptエラーが発生した場合。<br></td></tr><tr><td><div style="background-color:rgb(245 255 250 / 1.0);">(2)onloadが複数存在するケース</div>onloadが複数存在する場合は、最後のonloadが実行されます。<br>※onloadが上書きされるため</td></tr><tr><td><div style="background-color:rgb(245 255 250 / 1.0);">(3)DOMContentLoadedイベントが実行される順番</div>DOMContentLoadedイベントを実行される場合は<br>通常のonloadイベントよりも早く動作します。<br>onloadよりも早く、HTMLを読み込んだ時点で実行します。<br></td></tr><tr><td><div style="background-color:rgb(245 255 250 / 1.0);">(4)head要素内に実装したケース</div>すべての読み込みが完了しないとDOMがレンダリングされないのでWebページの表示が遅くなります。<br></td></tr></table><br><table><tr><td style="background-color:rgb(100 149 237 / 0.2);text-align:center;">[ブラウザの状態]</td></tr><tr><td style="background-color:rgb(245 255 250 / 1.0);">(1) HTTPレスポンスによるhtmlファイルの受け取り</td></tr><tr><td style="background-color:rgb(245 255 250 / 1.0);">(2) htmlファイル読み込み</td></tr><tr><td style="background-color:rgb(245 255 250 / 1.0);">(3) 外部リソース読み込み</td></tr><tr><td style="background-color:rgb(245 255 250 / 1.0);">(4) 外部リソース読み込み完了</td></tr><tr><td style="background-color:rgb(245 255 250 / 1.0);">(5) readystatechangeイベント<table><tr><td style="background-color:rgb(255 215 0 / 0.75);">状態</td><td style="background-color:white;">説明／実行されるイベント</td></tr><tr><td style="background-color:rgb(255 215 0 / 0.75);">loading</td><td style="background-color:white;">htmlファイルの読み込み開始〜読み込み中</td></tr><tr><td style="background-color:rgb(255 215 0 / 0.75);">interactive</td><td style="background-color:white;">htmlファイルの読み込みが完了した状態<br>(a)readystatechangeイベント<br>(b)DOMContentLoadedイベント<br></td></tr><tr><td style="background-color:rgb(255 215 0 / 0.75);">complete</td><td style="background-color:white;">htmlファイル及び外部リソースの読み込みがどちらも完了した状態<br>(a)readystatechangeイベント<br>(b)loadイベント<br></td></tr></table></td></tr><tr><td style="background-color:rgb(245 255 250 / 1.0);">(6) loadイベント</td></tr></table><br><table><tr><td style="background-color:rgb(100 149 237 / 0.2);text-align:center;">[loadイベント]</td></tr><tr><td></td></tr></table><table><tr><td style="background-color:rgb(245 255 250 / 1.0);">(1)window.onload</td></tr><tr><td>[サンプル]<br><pre class="prettyprint linenums;lang-js";>
function loadTest() 
{
  //ページ読み込み完了後に実行する処理
  alert('onloadイベントが発生しました');
}

/*
(例)
window.onload = 関数名;
*/
window.onload = loadTest;

/*
(例)
window.onload = function()という無名関数とした例
*/
window.onload = function() 
{
  loadTest();
};
</pre></td></tr></table><table><tr><td style="background-color:rgb(245 255 250 / 1.0);">(2)window.addEventListenerによるロードイベント</td></tr><tr><td>[サンプル]<br><pre class="prettyprint linenums;lang-js";>
function loadTest() 
{
  //ページ読み込み完了後に実行する処理
  alert('onloadイベントが発生しました');
}

window.addEventListener('load', function() {
  loadTest();
})
</pre></td></tr></table><br><table><tr><td style="background-color:rgb(100 149 237 / 0.2);text-align:center;">[実行結果]</td></tr></table><div style="background-color:rgb(245 255 250 / 1.0);">[実行手順]<br>(1)window.onload<br>(2)addEventListenerのロードイベント</div><pre class="prettyprint linenums;lang-js";>
window.onload = function() 
{
  alert("window.onload");
};
window.addEventListener('load', function() {
  alert("addEventListener load event");
})
</pre><script></script></script><div style="background-color:rgb(245 255 250 / 1.0);">[実行結果]<br>「addEventListener load event」がアラートされます。</div><br><div style="background-color:rgb(245 255 250 / 1.0);">[実行手順]<br>(1)addEventListenerのロードイベント<br>(2)window.onload</div><pre class="prettyprint linenums;lang-js";>
window.addEventListener('load', function() {
  alert("addEventListener load event");
})
window.onload = function() 
{
  alert("window.onload");
};
</pre><script></script></script><div style="background-color:rgb(245 255 250 / 1.0);">[実行結果]<br>「addEventListener load event」がアラートされます。</div><div style="background-color:rgb(245 255 250 / 1.0);">[テスト内容]<br>loadイベントとDOMContentLoadedイベントの混在</div><pre class="prettyprint linenums;lang-js";>
window.addEventListener('load', function() {
  alert("addEventListener load event");
})
window.onload = function() 
{
  alert("window.onload");
};
window.addEventListener('DOMContentLoaded', function() {
	alert("最初に実装したDOMContentLoaded");
})
window.addEventListener('DOMContentLoaded', function() {
	alert("最後に実装したDOMContentLoaded");
})
</pre><script></script></script><div style="background-color:rgb(245 255 250 / 1.0);">[実行結果]<br>下記の順番にアラートが実行されます。<table><tr><td>(1)</td><td>最初に実装したDOMContentLoaded</td></tr><tr><td>(2)</td><td>最後に実装したDOMContentLoaded</td></tr><tr><td>(3)</td><td>addEventListener load event</td></tr></table></div>※DOMContentLoadedイベントがloadイベントよりも早く実行されます。<br><br><a href='#' onClick="f2();">戻る</a></div><div id=l1><a href="#" onclick="f2();">back</a><br><br><table><tr><td style="font-size:150%;font-wiight:bold;background-color:rgb(143 188 143 / 0.4);">onload</td></tr><tr><td>The basic principle of onload is that it processes when all the content displayed on the web page has finished loading.</td></tr></table><br><table><tr><td style="background-color:rgb(100 149 237 / 0.2);text-align:center;">[About operation]</td></tr><tr><td><div style="background-color:rgb(245 255 250 / 1.0);">(1) Onload processing is interrupted due to an error</div>If a javascript error occurs<br>There are cases where the onload process is not executed. <br>(Example)<br>If a javascript error occurs because the specified tag ID does not exist. <br></td></tr><tr><td><div style="background-color:rgb(245 255 250 / 1.0);">(2) Cases where there are multiple onloads</div>If there are multiple onloads, the last onload will be executed. <br>*Because onload is overwritten</td></tr><tr><td><div style="background-color:rgb(245 255 250 / 1.0);">(3) Order in which DOMContentLoaded events are executed</div>When the DOMContentLoaded event is executed, it runs faster than the normal onload event. <br>It runs faster than onload, as soon as the HTML is loaded. <br></td></tr><tr><td><div style="background-color:rgb(245 255 250 / 1.0);">(4) Implemented within the head element</div>The DOM is not rendered until all loading is complete, which slows down the display of web pages. <br></td></tr></table><br><table><tr><td style="background-color:rgb(100 149 237 / 0.2);text-align:center;">[Browser Status]</td></tr><tr><td style="background-color:rgb(245 255 250 / 1.0);">(1) Receiving an html file as an HTTP response</td></tr><tr><td style="background-color:rgb(245 255 250 / 1.0);">(2) Loading html files</td></tr><tr><td style="background-color:rgb(245 255 250 / 1.0);">(3) Loading external resources</td></tr><tr><td style="background-color:rgb(245 255 250 / 1.0);">(4) External resources loaded</td></tr><tr><td style="background-color:rgb(245 255 250 / 1.0);">(5) readystatechange event<table><tr><td style="background-color:rgb(255 215 0 / 0.75);">state</td><td style="background-color:white;">description/Event to be executed</td></tr><tr><td style="background-color:rgb(255 215 0 / 0.75);">loading</td><td style="background-color:white;">Start of loading html file 〜 Loading</td></tr><tr><td style="background-color:rgb(255 215 0 / 0.75);">interactive</td><td style="background-color:white;">The html file has finished loading.<br>(a)readystatechange event<br>(b)DOMContentLoaded event<br></td></tr><tr><td style="background-color:rgb(255 215 0 / 0.75);">complete</td><td style="background-color:white;">The state when both the html file and external resources have finished loading<br>(a)readystatechange event<br>(b)load event<br></td></tr></table></td></tr><tr><td style="background-color:rgb(245 255 250 / 1.0);">(6) load event</td></tr></table><br><table><tr><td style="background-color:rgb(100 149 237 / 0.2);text-align:center;">[load event]</td></tr><tr><td></td></tr></table><table><tr><td style="background-color:rgb(245 255 250 / 1.0);">(1)window.onload</td></tr><tr><td>[Sample]<br><pre class="prettyprint linenums;lang-js";>
function loadTest() 
{
	//Processing to be executed after the page has finished loading
	alert('onload event has occurred');
}
/*
ex.)
window.onload = function name;
*/
window.onload = loadTest;

/*
ex.)
An example of an anonymous function called window.onload = function()
*/
window.onload = function() 
{
  loadTest();
};
</pre></td></tr></table><table><tr><td style="background-color:rgb(245 255 250 / 1.0);">(2) Load event via window.addEventListener</td></tr><tr><td>[Sample]<br><pre class="prettyprint linenums;lang-js";>
function loadTest() 
{
	//Processing to be executed after the page has finished loading
	alert('onload event has occurred');
}

window.addEventListener('load', function() {
  loadTest();
})
</pre></td></tr></table><br><table><tr><td style="background-color:rgb(100 149 237 / 0.2);text-align:center;">[Execution result]</td></tr></table><div style="background-color:rgb(245 255 250 / 1.0);">[Execution procedure]<br>(1)window.onload<br>(2)addEventListener load event</div><pre class="prettyprint linenums;lang-js";>
window.onload = function() 
{
  alert("window.onload");
};
window.addEventListener('load', function() {
  alert("addEventListener load event");
})
</pre><script></script></script><div style="background-color:rgb(245 255 250 / 1.0);">[Execution result]<br>"addEventListener load event" will be alerted.</div><br><div style="background-color:rgb(245 255 250 / 1.0);">[Execution procedure]<br>(1) addEventListener load event<br>(2) window.onload</div><pre class="prettyprint linenums;lang-js";>
window.addEventListener('load', function() {
  alert("addEventListener load event");
})
window.onload = function() 
{
  alert("window.onload");
};
</pre><script></script></script><div style="background-color:rgb(245 255 250 / 1.0);">[Execution result]<br>"addEventListener load event" will be alerted.</div><div style="background-color:rgb(245 255 250 / 1.0);">[Test content]<br>Mixing load and DOMContentLoaded events</div><pre class="prettyprint linenums;lang-js";>
window.addEventListener('load', function() {
  alert("addEventListener load event");
})
window.onload = function() 
{
  alert("window.onload");
};
window.addEventListener('DOMContentLoaded', function() {
	alert("First implementation of DOMContentLoaded");
})
window.addEventListener('DOMContentLoaded', function() {
	alert("Finally implemented DOMContentLoaded");
})
</pre><script></script></script><div style="background-color:rgb(245 255 250 / 1.0);">[Execution result]<br>Alerts will be executed in the following order:<table><tr><td>(1)</td><td>First implementation of DOMContentLoaded</td></tr><tr><td>(2)</td><td>Finally implemented DOMContentLoaded</td></tr><tr><td>(3)</td><td>addEventListener load event</td></tr></table></div>*The DOMContentLoaded event is executed earlier than the load event.<br><br><a href="#" onclick="f2();">back</a></div>    <script>window.onload = function() {f3();f0();};function f1(value){const obj=document.getElementById('lang');obj.value=value;f0();}function f0(){const obj=document.getElementById('lang');const l0=document.getElementById('l0');const l1=document.getElementById('l1');let lang=obj.value;if(lang==1){l0.style.display="none";l1.style.display="block";}else{l0.style.display="block";l1.style.display="none";}f4();}function f4(){const obj=document.getElementById('lang');let d=obj.value;let o=document.getElementsByName('r1');if(d==0){o[0].checked=true;}else{o[1].checked=true;}}function f3(){let o1=new URL(window.location.href);let o2=o1.searchParams;let d=o2.get('lang');if(d==1){const obj=document.getElementById('lang');obj.value=d;}}function f2(){const obj=document.getElementById('lang');let lang=obj.value;let url="";if(lang==0){url='/js/index.html?lang=0';}else{url='/js/index.html?lang=1';}window.location.href=url;}function f5(no){const obj=document.getElementById('lang');let lang=obj.value;let url="";switch(no){case 1:if(lang==0){url='/js/js1.html?lang=0';}else{url='/js/js1.html?lang=1';}break;case 2:if(lang==0){url='/js/js2.html?lang=0';}else{url='/js/js2.html?lang=1';}break;}window.location.href=url;}    </script>    </script><br><br><br><table style='background-color:rgba(220,220,220,255);color:black;text-align:center;'<tr<td style='background-color:rgba(198,198,255,255);color:black;text-align:center;'<b>著作権情報</b>	</td>	</>	<tclasp2>	<td aligleft >	ホームページおよプリ等に掲載されている情報等については、いかなる保障もいたしません。	<br />	ホームページおよびアプリ等を通じて入手したいかなる情報も複製、販売、出版または使用させたり、<br />	または公開したりすることはできません。	<br />	当方は、ホームペーよびアプリ利用したいかなる理由によっての障害等が発生しても、<br />	その結果ホームページおよびアプリ等を利用された本人または他の第三者が被った損害について<br />	一切の責任を負わないものとします。	<br />	</td>	</tr></table></body></html>