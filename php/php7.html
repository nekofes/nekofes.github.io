<!DOCTYPE html><html lang="ja"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><script>if(self!=top){top.location=self.location;}</script><title>PHP MEMO</title><script type = "text/javascript" src="../o/run_prettify.js"></script><link href = "../o/prettify.css" type="text/css" rel="stylesheet" /><style>.prettyprint ol.linenums > li {list-style-type: decimal; }.copy-button {display: inline-block; padding: 2px 5px; border: 1px solid #000; border-radius: 3px; text-decoration: none; color: #000; background-color: #ffffcc; }.copy-button:hover {background-color: #ffeb99; }</style></head><body oncontextmenu='return false;'><table><tr><td><label class="toggle-switch"><input type="checkbox" id="toggle"><span class="slider"></span></label></td><td><p id="langText">現在の言語: 日本語</p></td></tr></table><input type="hidden" id="lang" value="0"><a id="n1" href='#' onClick="f2();">戻る</a><br><br><table><tr><td style="font-size:150%;font-width:bold;background-color:rgb(143 188 143 / 0.4);"><div id="n2">ファイルアップロード</div></td></tr><tr><td><div id="n3">ajax</div></td></tr></table><br><div id="n4">ajaxを使用してhtml側からファイルをアップロードします。<br>サーバーではphpを使用してファイルを保存して結果をhtml側で受け取ります。<br></div><br><div id="n5">[サンプル]</div><div id=h1><textarea id="t1" rows=17 cols=80>
[test6.html]
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>画像アップロードサンプル</title>
</head>
<body>
<hr>
<input type="file" id="file-input">
<img id="image" >
<pre id="file-content"></pre>
<br>
<button onclick="uploadFile()" >アップロード</button>
<br>
<h2>結果:</h2>
<p id="result" style="border: 1px solid #ccc; padding: 10px; min-height: 20px;">
	ファイルを選択して「アップロード」をクリックしてください。
</p>

<script>
async function uploadFile() {
    const fileInput = document.getElementById('file-input');
    const result = document.getElementById('result');
    const uploadedImage = document.getElementById('image');
    const file = fileInput.files[0];

    if (!file) {
        result.textContent = 'ファイルが選択されていません。';
        return;
    }

    result.textContent = 'アップロード中...';

    
    
    const formData = new FormData();
    formData.append('image', file);

    try {
        
        const response = await fetch('./img/test6.php', {
            method: 'POST',
            body: formData 
        });

        if (!response.ok) {
            throw new Error('サーバーエラーが発生しました。');
        }
	const json = await response.json();
	
	if (json.status === 'success') {
result.textContent = 'アップロード成功: ' + json.message;
uploadedImage.src = json.file_url;
uploadedImage.style.display = 'block';
	} else {
result.textContent = 'アップロード失敗: ' + json.message;
	}
    } catch (error) {
        console.error('エラー:', error);
        result.textContent = '通信エラーまたはサーバーエラーが発生しました。';
    }
}
const fileInput = document.getElementById('file-input');
const fileContentElement = document.getElementById('file-content');
const image = document.getElementById('image');
image.style.display = "none";
 
let fileType = 0;
 
fileInput.addEventListener('change', (event) => 
{
const file = event.target.files[0];
if (!file) 
{
	return;
}
 
const reader = new FileReader();
 
reader.onload = (e) => {
	const content = e.target.result;
	if(fileType == 0)
	{
fileContentElement.textContent = content;
fileContentElement.style.display = "block";
image.style.display = "none";
	}
	else
	{
fileContentElement.textContent = "";
image.src = content;
fileContentElement.style.display = "none";
image.style.display = "block";
	}
};
 
reader.onerror = (e) => {
	console.error('it occur error to load file.', e);
	fileContentElement.textContent = 'it cannot read file.';
};
if(file.type.startsWith("image/"))
{
	fileType = 1;
	reader.readAsDataURL(file, 'UTF-8');
}
else
{
	fileType = 0;
	reader.readAsText(file);
}
});
</script>
</body>
</html>
</textarea></div><div id=h2><textarea id="t1" rows=17 cols=80>
[test6.html]
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>Image Upload Sample</title>
</head>
<body>
<hr>
<input type="file" id="file-input">
<img id="image" >
<pre id="file-content"></pre>
<br>
<button onclick="uploadFile()">Upload</button>
<br>
<h2>Result:</h2>
<p id="result" style="border: 1px solid #ccc; padding: 10px; min-height: 20px;">
    Select a file and click “Upload”.
</p>
<script>
async function uploadFile() {
    const fileInput = document.getElementById(‘file-input’);
    const result = document.getElementById(‘result’);
    const uploadedImage = document.getElementById(‘image’);
    const file = fileInput.files[0];

    if (!file) {
    result.textContent = ‘No file selected.’;
    return;
}

result.textContent = ‘Uploading...’;



    const formData = new FormData();
    formData.append(‘image’, file);

    try {
        
        const response = await fetch(‘./img/test6.php’, {
            method: ‘POST’,
            body: formData 
        });

        if (!response.ok) {
            throw new Error(‘Server error occurred.’);
        }
        const json = await response.json();
        
        if (json.status === ‘success’) {
            result.textContent = ‘Upload successful: ’ + json.message;
            uploadedImage.src = json.file_url;
uploadedImage.style.display = ‘block’;
        } else {
            result.textContent = ‘Upload failed: ’ + json.message;
        }
    } catch (error) {
        console.error(‘Error:’, error);
        result.textContent = ‘A communication error or server error occurred.’;
    }
}
const fileInput = document.getElementById(‘file-input’);
const fileContentElement = document.getElementById(‘file-content’);
const image = document.getElementById(‘image’);
image.style.display = “none”;
 
let fileType = 0; 
 
fileInput.addEventListener(‘change’, (event) => 
{
    const file = event.target.files[0];
    if (!file) 
    {
        return;
    }
 
    const reader = new FileReader();
 
    reader.onload = (e) => {
        const content = e.target.result;
	if(fileType == 0)
        {
            fileContentElement.textContent = content;
            fileContentElement.style.display = “block”;
            image.style.display = “none”;
        }
        else
        {
            fileContentElement.textContent = “”;
            image.src = content;
fileContentElement.style.display = “none”;
            image.style.display = “block”;
        }
    };
 
    reader.onerror = (e) => {
        console.error(‘An error occurred while loading the file.’, e);
        fileContentElement.textContent = ‘The file could not be read.’;
    };
if(file.type.startsWith(“image/”))
    {
        fileType = 1;
        reader.readAsDataURL(file, ‘UTF-8’);
    }
    else
    {
        fileType = 0;
        reader.readAsText(file);
    }
});
</script>
</body>
</html>
</textarea></div><br><div id=h3><a href="javascript:void(0);" id="copy1" class="copy-button" data-target="codeBlock1">copy</a><pre id="codeBlock1" class="prettyprint linenums;lang-js;">
[test6.php]
header('Content-Type: application/json; charset=UTF-8');

$response = [];
$uploadDir = 'uploads/'; // 保存先ディレクトリ

if (!is_dir($uploadDir)) {
	mkdir($uploadDir, 0755, true);
}

if (isset($_FILES['image']) && $_FILES['image']['error'] === UPLOAD_ERR_OK) {
	$fileTmpPath = $_FILES['image']['tmp_name'];
	$fileName = basename($_FILES['image']['name']);//パスを除くファイル名を取得
	$fileNameCmps = explode(".", $fileName);
	$fileExtension = strtolower(end($fileNameCmps));
	$newFileName = md5(time() . $fileName) . '.' . $fileExtension;
	$destPath = $uploadDir . $newFileName;

	$allowedfileExtensions = array('jpg', 'png', 'gif', 'jpeg');
	if (in_array($fileExtension, $allowedfileExtensions)) {
		// ファイルを一時ディレクトリから指定の場所に移動
		if (move_uploaded_file($fileTmpPath, $destPath)) {
			$response['status'] = 'success';
			$response['message'] = 'ファイルが正常にアップロードされました。';
			//$response['file_url'] = $destPath; // ブラウザからアクセスできるURL
			$response['file_url'] = 'img/' . $destPath;
		} else {
			$response['status'] = 'error';
			$response['message'] = 'ファイルの移動に失敗しました。ディレクトリの書き込み権限を確認してください。';
		}
	} else {
		$response['status'] = 'error';
		$response['message'] = '許可されていないファイル形式です。';
	}
} else {
	$response['status'] = 'error';
	$response['message'] = 'ファイルアップロードエラー。';
}

// JSONを返す
echo json_encode($response);
</pre></div><div id=h4><pre id="codeBlock2" class="prettyprint linenums;lang-js;">
</pre><a href="javascript:void(0);" id="copy2" class="copy-button" data-target="codeBlock2">copy</a><pre id="codeBlock2" class="prettyprint linenums;lang-js;">
[test6.php]
header(‘Content-Type: application/json; charset=UTF-8’);

$response = [];
$uploadDir = ‘uploads/’; // Destination directory

if (!is_dir($uploadDir)) {
    mkdir($uploadDir, 0755, true);
}

if (isset($_FILES[‘image’]) && $_FILES[‘image’][‘error’] === UPLOAD_ERR_OK) {
    $fileTmpPath = $_FILES[‘image’][‘tmp_name’];
    $fileName = basename($_FILES[‘image’] [『name』]);//Get filename excluding path
    $fileNameCmps = explode(「.」, $fileName);
    $fileExtension = strtolower(end($fileNameCmps));
    $newFileName = md5(time() . $fileName) . 『.』 . $fileExtension;
    $destPath = $uploadDir . $newFileName;

    $allowedfileExtensions = array(‘jpg’, ‘png’, ‘gif’, ‘jpeg’);
    if (in_array($fileExtension, $allowedfileExtensions)) {
        // Move file from temporary directory to specified location
        if (move_uploaded_file($fileTmpPath, $destPath)) {
    $response[‘status’] = ‘success’;
    $response[‘message’] = ‘File uploaded successfully.’;
    //$response[‘file_url’] = $destPath; // URL accessible from browser
            $response[‘file_url’] = ‘img/’ . $destPath;
} else {
    $response[‘status’] = ‘error’;
    $response[‘message’] = ‘Failed to move the file. Please check the directory write permissions.’;
}
} else {
    $response[‘status’] = ‘error’;
        $response[‘message’] = ‘Unsupported file format.’;
    }
} else {
    $response[‘status’] = ‘error’;
    $response[‘message’] = ‘File upload error.’;
}

// Return JSON
echo json_encode($response);
</pre></div><br><div id="n6">$FILES関数<br><br><table><tr><td style="background-color:rgb(75 0 130 / 0.2);text-align:left;">キー名</td><td style="background-color:rgb(75 0 130 / 0.2);text-align:left;">説明</td><td style="background-color:rgb(75 0 130 / 0.2);text-align:left;">値の例</td></tr></td></tr><tr><td style="background-color:rgb(75 0 130 / 0.2);text-align:left;">name</td><td>html側で選択した元のファイル名</td><td>post.png</td></tr><tr><td style="background-color:rgb(75 0 130 / 0.2);text-align:left;">type</td><td>ファイルのMIMEタイプ</td><td>image/png</td></tr><tr><td style="background-color:rgb(75 0 130 / 0.2);text-align:left;">size</td><td>アップロードされたファイルのバイト単位のサイズ</td><td>10000(およそ10KB)</td></tr><tr><td style="background-color:rgb(75 0 130 / 0.2);text-align:left;">tmp_name</td><td>サーバ上での一時保存されたファイルのパスとファイル名</td><td>/tmp/abc123</td></tr><tr><td style="background-color:rgb(75 0 130 / 0.2);text-align:left;">error</td><td>エラーコード(アップロードの成功有無)</td><td>0(UPLOAD_ERR_OK)</td></tr></table><br><div style="background-color:rgb(245 255 250 / 1.0);text-align:left;">basename($_FILES['image']['name']);/</div>basenameを使用することでパスを除いたファイル名を取得することができます。<br>これはブラウザによってはフルパスが入ってくることがある(古いブラウザ)ケース<br>そして悪意あるリクエストの対策としてファイル名のみを抽出することを目的としています。<br>/etc/passwordというフォルダパスとパスワードファイルがあると仮定します。<br>任意の場所に保存できてしまうということは<br>この場所に上書き保存をする攻撃を受けてしまうとシステムが正常に動作しなくなる原因となります。<br>このような攻撃に対する対策として不要なパスは除外する方法をとることが望ましいといえます。<br><br><div style="background-color:rgb(245 255 250 / 1.0);text-align:left;">strtolower(end($fileNameCmps))</div>end関数<br>配列の内部ポインタを採取要素に移動し<br>その最終要素の値を返す関数です。<br><br><div style="background-color:rgb(245 255 250 / 1.0);text-align:left;">explode(".", $fileName)</div>を使用するとファイル名と拡張子の2個の配列要素ができます。<br>そこでend関数を使うと拡張子を取得できます。<br>※拡張子が存在することを前提とした話となります。<br><br><div style="background-color:rgb(245 255 250 / 1.0);text-align:left;">$newFileName = md5(time() . $fileName) . '.' . $fileExtension;</div>md5関数<br>PHPの組み込み関数です。<br>指定された文字列のMD5ハッシュ値を計算します。<br>常に32文字の16進数(ハッシュ値)を生成します。<br>不可逆な変換であり、ハッシュ値から元の文字列を復元することは困難と言われています。<br>time関数<br>Unixタイムスタンプを返します。<br>※1970年1月1日00:00:00 UTCからの経過秒数を表す整数の値です。<br><br><div style="background-color:rgb(245 255 250 / 1.0);text-align:left;">in_array($fileExtension, $allowedfileExtensions)</div>in_array関数は特定の要素が配列の中に存在するかを判定し<br>見つかった場合はtrue<br>見つからなかった場合はfalse<br>を返します。<br><br><div style="background-color:rgb(245 255 250 / 1.0);text-align:left;">$response['status'] = 'success';</div>$response['message'] = 'ファイルが正常にアップロードされました。';<br>判定した結果を判定結果ごとに上記のように配列設定します。<br>この配列をjson_encodeを使用して出力することで<br>html側で受け取ることができ、その結果を判定した内容をユーザが見る画面上で確認できるようにしています。<br><br></div><br><br><br><a id="n7" href='#' onClick="f2();">戻る</a><br><br><table style='background-color:rgba(220,220,220,255);color:black;text-align:center;'><tr><td style='background-color:rgba(198,198,255,255);color:black;text-align:center;'><b>著作権情報</b></td></tr><tr class=p2><td align=left >	ホームページおよプリ等に掲載されている情報等については、いかなる保障もいたしません。<br>ホームページおよびアプリ等を通じて入手したいかなる情報も複製、販売、出版または使用させたり、<br>または公開したりすることはできません。<br>当方は、ホームページおよびアプリ等を利用したいかなる理由によっての障害等が発生しても、<br>その結果ホームページおよびアプリ等を利用された本人または他の第三者が被った損害について<br>一切の責任を負わないものとします。<br></td></tr></table><style>.marker99ccff{background-color: rgb(153 204 255 / 0.5);}.marker8fbc8f{background-color: rgb(143 188 143 / 0.5);}.markerffd700{background-color: rgb(255 215 0 / 0.5);}.frame {background-color: rgb(240 248 255 / 0.5); border: 3px solid rgb(30 144 255 / 1.00);    padding: 5px;            margin: 10px;            margin-left:0px;word-break:break-all;}.toggle-switch {position: relative;display: inline-block;width: 60px;height: 34px;}.toggle-switch input {display: none;}.slider {position: absolute;cursor: pointer;top: 0; left: 0;right: 0; bottom: 0;background-color: lightgreen; transition: 0.4s;border-radius: 34px;}.slider:before {position: absolute;content: "";height: 26px; width: 26px;left: 4px; bottom: 4px;background-color: white;transition: 0.4s;border-radius: 50%;content:"JP";text-align: center;}input:checked + .slider {background-color: lightblue; }input:checked + .slider:before {transform: translateX(26px);content:"EN";text-align: center;}</style><script>function copyCodeById(targetId) {const codeElement = document.getElementById(targetId);if (!codeElement) {console.error("対象のコードブロックが見つかりません: " + targetId);return;}const codeText = codeElement.innerText;if (navigator.clipboard && navigator.clipboard.writeText) {navigator.clipboard.writeText(codeText).then(() => {console.log("コピー成功");}).catch(err => {console.error("コピー中にエラーが発生しました:", err);});} else {console.error("Clipboard API はこのブラウザで利用できません");}}document.querySelectorAll('.copy-button').forEach(function(button) {button.addEventListener('click', function() {const targetId = this.getAttribute('data-target');copyCodeById(targetId);});});</script><script>let lang = 0; let nextUrlPath="";const text = {ja: {n1:"戻る",n2:"ファイルアップロード",n3:"ajax",n4:`ajaxを使用してhtml側からファイルをアップロードします。<br>サーバーではphpを使用してファイルを保存して結果をhtml側で受け取ります。<br>`,n5:`[サンプル]`,n6:`$FILES関数<br><br><table><tr><td style="background-color:rgb(75 0 130 / 0.2);text-align:left;">キー名</td><td style="background-color:rgb(75 0 130 / 0.2);text-align:left;">説明</td><td style="background-color:rgb(75 0 130 / 0.2);text-align:left;">値の例</td></tr></td></tr><tr><td style="background-color:rgb(75 0 130 / 0.2);text-align:left;">name</td><td>html側で選択した元のファイル名</td><td>post.png</td></tr><tr><td style="background-color:rgb(75 0 130 / 0.2);text-align:left;">type</td><td>ファイルのMIMEタイプ</td><td>image/png</td></tr><tr><td style="background-color:rgb(75 0 130 / 0.2);text-align:left;">size</td><td>アップロードされたファイルのバイト単位のサイズ</td><td>10000(およそ10KB)</td></tr><tr><td style="background-color:rgb(75 0 130 / 0.2);text-align:left;">tmp_name</td><td>サーバ上での一時保存されたファイルのパスとファイル名</td><td>/tmp/abc123</td></tr><tr><td style="background-color:rgb(75 0 130 / 0.2);text-align:left;">error</td><td>エラーコード(アップロードの成功有無)</td><td>0(UPLOAD_ERR_OK)</td></tr></table><br><div style="background-color:rgb(245 255 250 / 1.0);text-align:left;">basename($_FILES['image']['name']);/</div>basenameを使用することでパスを除いたファイル名を取得することができます。<br>これはブラウザによってはフルパスが入ってくることがある(古いブラウザ)ケース<br>そして悪意あるリクエストの対策としてファイル名のみを抽出することを目的としています。<br>/etc/passwordというフォルダパスとパスワードファイルがあると仮定します。<br>任意の場所に保存できてしまうということは<br>この場所に上書き保存をする攻撃を受けてしまうとシステムが正常に動作しなくなる原因となります。<br>このような攻撃に対する対策として不要なパスは除外する方法をとることが望ましいといえます。<br><br><div style="background-color:rgb(245 255 250 / 1.0);text-align:left;">strtolower(end($fileNameCmps))</div>end関数<br>配列の内部ポインタを採取要素に移動し<br>その最終要素の値を返す関数です。<br><br><div style="background-color:rgb(245 255 250 / 1.0);text-align:left;">explode(".", $fileName)</div>を使用するとファイル名と拡張子の2個の配列要素ができます。<br>そこでend関数を使うと拡張子を取得できます。<br>※拡張子が存在することを前提とした話となります。<br><br><div style="background-color:rgb(245 255 250 / 1.0);text-align:left;">$newFileName = md5(time() . $fileName) . '.' . $fileExtension;</div>md5関数<br>PHPの組み込み関数です。<br>指定された文字列のMD5ハッシュ値を計算します。<br>常に32文字の16進数(ハッシュ値)を生成します。<br>不可逆な変換であり、ハッシュ値から元の文字列を復元することは困難と言われています。<br>time関数<br>Unixタイムスタンプを返します。<br>※1970年1月1日00:00:00 UTCからの経過秒数を表す整数の値です。<br><br><div style="background-color:rgb(245 255 250 / 1.0);text-align:left;">in_array($fileExtension, $allowedfileExtensions)</div>in_array関数は特定の要素が配列の中に存在するかを判定し<br>見つかった場合はtrue<br>見つからなかった場合はfalse<br>を返します。<br><br><div style="background-color:rgb(245 255 250 / 1.0);text-align:left;">$response['status'] = 'success';</div>$response['message'] = 'ファイルが正常にアップロードされました。';<br>判定した結果を判定結果ごとに上記のように配列設定します。<br>この配列をjson_encodeを使用して出力することで<br>html側で受け取ることができ、その結果を判定した内容をユーザが見る画面上で確認できるようにしています。<br><br>`,n7:"戻る",},en: {n1: "back",n2: "File Upload",n3: "Ajax",n4: `Upload a file from the HTML side using Ajax. <br>The file is saved on the server using PHP, and the result is received on the HTML side. <br>`,n5:`[Sample]`,n6:`$FILES Function<br><br><table><tr><td style="background-color:rgb(75 0 130 / 0.2);text-align:left;">Key Name</td><td style="background-color:rgb(75 0 130 / 0.2);text-align:left;">Description</td><td style="background-color:rgb(75 0 130 / 0.2);text-align:left;">Example Value</td></tr></td></tr><tr><td style="background-color:rgb(75 0 130 / 0.2);text-align:left;">name</td><td>Original filename selected in the HTML page</td><td>post.png</td></tr><tr><td style="background-color:rgb(75 0 130 / 0.2);text-align:left;">type</td><td>File MIME type</td><td>image/png</td></tr><tr><td style="background-color:rgb(75 0 130 / 0.2);text-align:left;">size</td><td>Size of the uploaded file in bytes</td><td>10000 (approximately 10KB)</td></tr><tr><td style="background-color:rgb(75 0 130 / 0.2);text-align:left;">tmp_name</td><td>Path and file name of the temporarily saved file on the server</td><td>/tmp/abc123</td></tr><tr><td style="background-color:rgb(75 0 130 / 0.2);text-align:left;">error</td><td>Error code (upload success or failure)</td><td>0(UPLOAD_ERR_OK)</td></tr></table><br><div style="background-color:rgb(245 255 250 / 1.0);text-align:left;">basename($_FILES['image']['name']);/</div>Using basename allows you to obtain the file name without the path. <br>This is for cases where the full path may be entered in some browsers (older browsers).<br>The purpose is to extract only the file name as a countermeasure against malicious requests. <br>Assume that there is a folder path and password file called /etc/password. <br>If it is possible to save to any location,<br>an attacker who overwrites this location could cause the system to malfunction. <br>To counter such attacks, it is recommended to exclude unnecessary paths. <br><br><div style="background-color:rgb(245 255 250 / 1.0);text-align:left;">strtolower(end($fileNameCmps))</div>end Function<br>This function moves the array's internal pointer to the extracted element and<br>returns the value of the last element. <br><br><div style="background-color:rgb(245 255 250 / 1.0);text-align:left;">explode(".", $fileName)</div>Using this function creates two array elements: the file name and the extension. <br>You can then use the end function to obtain the extension. <br>This assumes that the extension exists. <br><br><div style="background-color:rgb(245 255 250 / 1.0);text-align:left;">$newFileName = md5(time() . $fileName) . '.' . $fileExtension;</div>md5 Function<br>This is a built-in PHP function. <br>Calculates the MD5 hash value of the specified string. <br>Always generates a 32-character hexadecimal number (hash value). <br>This is an irreversible conversion, making it difficult to recover the original string from the hash value. <br>time Function<br>Returns a Unix timestamp. <br>*This is an integer value representing the number of seconds elapsed since January 1, 1970, 00:00:00 UTC. <br><br><div style="background-color:rgb(245 255 250 / 1.0);text-align:left;">in_array($fileExtension, $allowedfileExtensions)</div>The in_array function determines whether a specific element exists in an array.<br>If found, it returns true.<br>If not found, it returns false.<br><br><br><div style="background-color:rgb(245 255 250 / 1.0);text-align:left;">$response['status'] = 'success';</div>$response['message'] = 'The file was uploaded successfully.';<br>The results of the judgment are set as an array as shown above for each judgment result. <br>By outputting this array using json_encode,<br>it can be received on the HTML side, and the judgment results can be confirmed on the screen viewed by the user. <br><br>`,n7:"back",}};function applyTextAll(lang, divIds) {divIds.forEach((id) => applyText(lang, id));}function getText(lang, divId) {return (text[lang] && text[lang][divId]) ?? (text.ja && text.ja[divId]) ?? '';}function applyText(lang, divId) {const el = document.getElementById(divId);if (!el) return;el.innerHTML = getText(lang, divId);}const ary = ["n1", "n2", "n3", "n4", "n5", "n6", "n7"];document.addEventListener("DOMContentLoaded", () => {const toggle = document.getElementById("toggle");const hiddenLang = document.getElementById("lang");const langText = document.getElementById("langText");f4();toggle.addEventListener("change", () => {changeToggle();});});function changeToggle(){const hiddenLang = document.getElementById("lang");if (toggle.checked) {hiddenLang.value = 1;lang=1;} else {hiddenLang.value = 0;lang=0;}displayLangText();applyTextAll(lang==0?"ja":"en", ary);}function displayLangText(){const hiddenLang = document.getElementById("lang");if (hiddenLang.value == 0) {langText.textContent = "現在の言語: 日本語";} else {langText.textContent = "current language: English";}f3();f0();const obj=document.getElementById('lang');if(obj.value==1){toggle.checked=true;const hiddenLang = document.getElementById("lang");hiddenLang.value = 1;}else{toggle.checked=false;}}function f1(value){const obj=document.getElementById('lang');obj.value=value;f0();}function f0(){const obj=document.getElementById('lang');let lang=obj.value;applyTextAll(lang==0?"ja":"en", ary);f4();}function f4(){const obj=document.getElementById('lang');let lang=obj.value;const h1=document.getElementById('h1');const h2=document.getElementById('h2');const h3=document.getElementById('h3');const h4=document.getElementById('h4');if(lang==1){h1.style.display="none";h2.style.display="block";h3.style.display="none";h4.style.display="block";}else{h1.style.display="block";h2.style.display="none";h3.style.display="block";h4.style.display="none";}}function f3(){let o1=new URL(window.location.href);let o2=o1.searchParams;let d=o2.get('lang');const hiddenLang = document.getElementById("lang");if(d==1||hiddenLang.value==1){hiddenLang.value=1;}else{hiddenLang.value=0;}}function f2(){const obj=document.getElementById('lang');let lang=obj.value;window.location.href=urlPath();}function urlPath(){const obj=document.getElementById('lang');let lang=obj.value;nextUrlPath="/php/index.html";return nextUrlPath+"?lang=" + lang;}</script></body></html>