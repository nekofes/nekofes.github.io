<!DOCTYPE html><html lang="ja"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><script>if(self!=top){top.location=self.location;}</script><title>PHP MEMO</title><script type = "text/javascript" src="../o/run_prettify.js"></script><link href = "../o/prettify.css" type="text/css" rel="stylesheet" /><style>.prettyprint ol.linenums > li {list-style-type: decimal; }.copy-button {display: inline-block; padding: 2px 5px; border: 1px solid #000; border-radius: 3px; text-decoration: none; color: #000; background-color: #ffffcc; }.copy-button:hover {background-color: #ffeb99; }</style></head><body oncontextmenu='return false;'><table><tr><td><label class="toggle-switch"><input type="checkbox" id="toggle"><span class="slider"></span></label></td><td><p id="langText">現在の言語: 日本語</p></td></tr></table><input type="hidden" id="lang" value="0"><a id="n1" href='#' onClick="f2();">戻る</a><br><br><table><tr><td style="font-size:150%;font-width:bold;background-color:rgb(143 188 143 / 0.4);"><div id="n2">連想配列(3)</div></td></tr><tr><td><div id="n3">配列関連</div></td></tr></table><br><div id="n4">連想配列は、データに名前（キー）を付けて管理できる便利な仕組みです。<br>キーを指定してそのキーに紐づく値を取得することで直感的なデータ構造を把握できます。<br>連想配列はstdClassを使ってオブジェクトにキャストできます。<br>また、オブジェクトにキャストしたあともarrayでキャストすることで連想配列に戻すことができます。<br><br>[stdClassの主な特徴]<br><div style="background-color:rgb(245 255 250 / 1.0);text-align:left;">[空のクラス]<br></div>デフォルトではプロパティもメソッドも含まれていません。<br><div style="background-color:rgb(245 255 250 / 1.0);text-align:left;">[動的プロパティ]<br></div>実行時にプロパティを自由に追加・削除できます。<br><div style="background-color:rgb(245 255 250 / 1.0);text-align:left;">[データコンテナ]<br></div>主にデータ保存用の器として機能します。<br><div style="background-color:rgb(245 255 250 / 1.0);text-align:left;">[基底クラスではない]<br></div>他のすべてのPHPクラスの親クラス（基底クラス）ではありません。<br><br></div><br><div id="n5">[サンプル]</div><br><div id=h1><a href="javascript:void(0);" id="copy1" class="copy-button" data-target="codeBlock1">copy</a><pre id="codeBlock1" class="prettyprint linenums;lang-js;">
class test1
{
	private function sampleSelectTable():object
	{
		$users = new stdClass;
		// データベース接続設定（仮の値）
		$dsn = 'mysql:host=localhost;dbname=test_db;charset=utf8mb4';
		$user = 'user';
		$password = 'password';
		
		try {
			$pdo = new PDO($dsn, $user, $password);
			// エラーモードを設定しておくとデバッグしやすい
			$pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
			//name:名前
			//age:年齢
			$stmt = $pdo->query("select name, age from users");
		
			//PDO::FETCH_OBJを指定すると
			//各レコードがstdClass オブジェクトとしてフェッチされます
			$users = $stmt->fetchAll(PDO::FETCH_OBJ);
		
		} catch (PDOException $e) {
			echo "データベース接続エラー: " . $e->getMessage();
		}
		return $users;
	}
	function test1()
	{
		$obj = $this->sampleSelectTable();
		//[取得した例]
		/*
		$obj = [
			// インデックス 0
			(object) ["name" => "yamada", "age" => 20],
		
			// インデックス 1
			(object) ["name" => "tanaka", "age" => 21]
		];
		*/
		//$objはstdClassの配列になります
		$no = 1;
		foreach ($obj as $user) 
		{
			//連想配列ではなく、アロー演算子(->)でプロパティにアクセスします
			echo $no."件目".PHP_EOL;
			echo "名前:" . $user->name.PHP_EOL;
			echo "年齢:" . $user->age.PHP_EOL;
			$no++;
		}
		//[結果の例]
		/*
		1件目
		名前:yamada
		年齢:20
		2件目
		名前:tanaka
		年齢:21
		*/
		//$ary = (array)$obj;
		
		$no = 1;
		foreach ($obj as $user) {
			// $obj は stdClass オブジェクト (1件)
			$ary = (array)$user;
			// $user_array は連想配列 (1件)
			// Array ( [id] => 1 [name] => 山田 [age] => 30 ) になる
			echo $no."件目".PHP_EOL;
			foreach ($ary as $key => $value) 
			{
				echo $key . ': ' . $value . PHP_EOL;
			}
			$no++;
		}
		//[結果の例]
		/*
		1件目
		name: yamada
		age: 20
		2件目
		name: tanaka
		age: 21
		*/
	}
	function test2()
	{
		$ary = [];
		$ary1 = [
			"name"=>"tanaka",
			"age" =>21
		];
		$ary[]=$ary1;
		$ary2 = [
			"name"=>"tanaka",
			"age" => 20
		];
		$ary[]=$ary2;
		for($i=0; $i<count($ary); ++$i)
		{
			$obj =(object)$ary[$i];
			echo "i:$i".PHP_EOL;
			echo "name:".$obj->name.PHP_EOL;
			echo "age:".$obj->age.PHP_EOL;
		}
		//[結果]
		/*
		i:0
		name:tanaka
		age:21
		i:1
		name:tanaka
		age:20
		*/
	}

}
echo "&lt;pre&gt;";
$cls1= new test1();
$cls1->test1();
$cls1->test2();
echo "&lt;/pre&gt;";
</pre></div><div id=h11><a href="javascript:void(0);" id="copy11" class="copy-button" data-target="codeBlock11">copy</a><pre id="codeBlock11" class="prettyprint linenums;lang-js;">
class test1
{
	private function sampleSelectTable():object
	{
		$users = new stdClass;
		// Database connection settings (tentative values)
		$dsn = 'mysql:host=localhost;dbname=test_db;charset=utf8mb4';
		$user = 'user';
		$password = 'password';
		
		try {
			$pdo = new PDO($dsn, $user, $password);
			// Setting the error mode makes debugging easier.
			$pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
			//name: Name
			//age: Age
			$stmt = $pdo->query("select name, age from users");
			
			//If PDO::FETCH_OBJ is specified
			//Each record will be fetched as a stdClass object.
			$users = $stmt->fetchAll(PDO::FETCH_OBJ);
		
		} catch (PDOException $e) {
			echo "Database connection error: " . $e->getMessage();
		}
		return $users;
	}
	function test1()
	{
		$obj = $this->sampleSelectTable();
		//[Retrieved example]
		/*
		$obj = [
		// Index 0
		(object) ["name" => "yamada", "age" => 20],
		
		// Index 1
		(object) ["name" => "tanaka", "age" => 21]
		];
		*/
		// $obj is an array of stdClass.
		$no = 1;
		foreach ($obj as $user)
		{
			// Access properties with the arrow operator (->) instead of an associative array.
			echo $no."item".PHP_EOL;
			echo "Name:" . $user->name.PHP_EOL;
			echo "Age:" . $user->age.PHP_EOL;
			$no++;
		}
		//[Example Result]
		/*
		1st Result
		Name: Yamada
		Age: 20
		2nd Result
		Name: Tanaka
		Age: 21
		*/
		//$ary = (array)$obj;
		
		$no = 1;
		foreach ($obj as $user) {
			// $obj is a stdClass object (1 result)
			$ary = (array)$user;
			// $user_array is an associative array (1 result)
			// Becomes Array ( [id] => 1 [name] => Yamada [age] => 30 )
			echo $no.item.PHP_EOL;
			foreach ($ary as $key => $value)
			{
				echo $key . ': ' . $value . PHP_EOL;
			}
			$no++;
		}
		//[Example Result]
		/*
		1st Result
		name: Yamada 
		age: 20 
		2nd item 
		name: tanaka 
		age: 21 
		*/ 
	} 
	function test2() 
	{ 
		$ary = []; 
		$ary1 = [ 
		"name"=>"tanaka", 
		"age" =>21 
		]; 
		$ary[]=$ary1; 
		$ary2 = [ 
		"name"=>"tanaka", 
		"age" => 20 
		]; 
		$ary[]=$ary2; 
		for($i=0; $i<count($ary); ++$i) 
		{ 
			$obj =(object)$ary[$i]; 
			echo "i:$i".PHP_EOL; 
			echo "name:".$obj->name.PHP_EOL; 
			echo "age:".$obj->age.PHP_EOL; 
		} 
		//[result] 
		/* 
		i:0 
		name:tanaka 
		age:21 
		i:1 
		name:tanaka 
		age:20 
		*/ 
	}

}
echo "&lt;pre&gt;";
$cls1= new test1();
$cls1->test1();
$cls1->test2();
echo "&lt;/pre&gt;";
</pre></div><br><div id="n6">データベースのテーブルなどからデータを取得したときに１件ずつのオブジェクトとして配列に格納しています。<br>このデータを連想配列として使用する場合は<br>array型にキャストをすることでデータを取り出すことができます。<br>上記のステップではforeachで1件の$userオブジェクトを取り出しています。<br><div style="background-color:rgb(245 255 250 / 1.0);text-align:left;">$ary = (array)$user;</div>そのオブジェクトをarrayでキャストすることで連想配列に変換しています。<br><br>tes2関数では<br>連想配列を配列に追加しています。<br><div style="background-color:rgb(245 255 250 / 1.0);text-align:left;">$obj =(object)$ary[$i];</div>上記のように、その配列からデータを順次取り出し、objectでキャストしています。<br><br>そしてオブジェクトからアロー演算子を使ってデータを取り出すことができます。<br><br>このように配列で連想配列とオブジェクトをキャストにより相互変換することができます。<br><br></div><br><br><a id="n8" href='#' onClick="f2();">戻る</a><br><br><table style='background-color:rgba(220,220,220,255);color:black;text-align:center;'><tr><td style='background-color:rgba(198,198,255,255);color:black;text-align:center;'><b>著作権情報</b></td></tr><tr class=p2><td align=left >	ホームページおよプリ等に掲載されている情報等については、いかなる保障もいたしません。<br>ホームページおよびアプリ等を通じて入手したいかなる情報も複製、販売、出版または使用させたり、<br>または公開したりすることはできません。<br>当方は、ホームページおよびアプリ等を利用したいかなる理由によっての障害等が発生しても、<br>その結果ホームページおよびアプリ等を利用された本人または他の第三者が被った損害について<br>一切の責任を負わないものとします。<br></td></tr></table><style>.marker99ccff{background-color: rgb(153 204 255 / 0.5);}.marker8fbc8f{background-color: rgb(143 188 143 / 0.5);}.markerffd700{background-color: rgb(255 215 0 / 0.5);}.frame {background-color: rgb(240 248 255 / 0.5); border: 3px solid rgb(30 144 255 / 1.00);    padding: 5px;            margin: 10px;            margin-left:0px;word-break:break-all;}.toggle-switch {position: relative;display: inline-block;width: 60px;height: 34px;}.toggle-switch input {display: none;}.slider {position: absolute;cursor: pointer;top: 0; left: 0;right: 0; bottom: 0;background-color: lightgreen; transition: 0.4s;border-radius: 34px;}.slider:before {position: absolute;content: "";height: 26px; width: 26px;left: 4px; bottom: 4px;background-color: white;transition: 0.4s;border-radius: 50%;content:"JP";text-align: center;}input:checked + .slider {background-color: lightblue; }input:checked + .slider:before {transform: translateX(26px);content:"EN";text-align: center;}</style><script>function copyCodeById(targetId) {const codeElement = document.getElementById(targetId);if (!codeElement) {console.error("対象のコードブロックが見つかりません: " + targetId);return;}const codeText = codeElement.innerText;if (navigator.clipboard && navigator.clipboard.writeText) {navigator.clipboard.writeText(codeText).then(() => {console.log("コピー成功");}).catch(err => {console.error("コピー中にエラーが発生しました:", err);});} else {console.error("Clipboard API はこのブラウザで利用できません");}}document.querySelectorAll('.copy-button').forEach(function(button) {button.addEventListener('click', function() {const targetId = this.getAttribute('data-target');copyCodeById(targetId);});});</script><script>let lang = 0; let nextUrlPath="";const text = {ja: {n1:"戻る",n2:"連想配列(3)",n3:"配列関連",n4:`連想配列は、データに名前（キー）を付けて管理できる便利な仕組みです。<br>キーを指定してそのキーに紐づく値を取得することで直感的なデータ構造を把握できます。<br>連想配列はstdClassを使ってオブジェクトにキャストできます。<br>また、オブジェクトにキャストしたあともarrayでキャストすることで連想配列に戻すことができます。<br><br>[stdClassの主な特徴]<br><div style="background-color:rgb(245 255 250 / 1.0);text-align:left;">[空のクラス]<br></div>デフォルトではプロパティもメソッドも含まれていません。<br><div style="background-color:rgb(245 255 250 / 1.0);text-align:left;">[動的プロパティ]<br></div>実行時にプロパティを自由に追加・削除できます。<br><div style="background-color:rgb(245 255 250 / 1.0);text-align:left;">[データコンテナ]<br></div>主にデータ保存用の器として機能します。<br><div style="background-color:rgb(245 255 250 / 1.0);text-align:left;">[基底クラスではない]<br></div>他のすべてのPHPクラスの親クラス（基底クラス）ではありません。<br>`,n5:`[サンプル]`,n6:`データベースのテーブルなどからデータを取得したときに１件ずつのオブジェクトとして配列に格納しています。<br>このデータを連想配列として使用する場合は<br>array型にキャストをすることでデータを取り出すことができます。<br>上記のステップではforeachで1件の$userオブジェクトを取り出しています。<br><div style="background-color:rgb(245 255 250 / 1.0);text-align:left;">$ary = (array)$user;</div>そのオブジェクトをarrayでキャストすることで連想配列に変換しています。<br><br>tes2関数では<br>連想配列を配列に追加しています。<br><div style="background-color:rgb(245 255 250 / 1.0);text-align:left;">$obj =(object)$ary[$i];</div>上記のように、その配列からデータを順次取り出し、objectでキャストしています。<br><br>そしてオブジェクトからアロー演算子を使ってデータを取り出すことができます。<br><br>このように配列で連想配列とオブジェクトをキャストにより相互変換することができます。<br>`,n7:"戻る",},en: {n1: "back",n2: "Associative Arrays (3)",n3: "Array Related",n4:`Associative arrays are a convenient mechanism for managing data by assigning names (keys). <br>By specifying a key and retrieving the value associated with that key, you can intuitively understand the data structure. <br>Associative arrays can be cast to objects using stdClass. <br>Also, after casting to an object, they can be converted back to associative arrays by casting with array. <br><br>[Key Features of stdClass]<br><div style="background-color:rgb(245 255 250 / 1.0);text-align:left;">[Empty Class]<br></div>By default, it contains no properties or methods. <br><div style="background-color:rgb(245 255 250 / 1.0);text-align:left;">[Dynamic Properties]<br></div>Properties can be freely added or removed at runtime. <br><div style="background-color:rgb(245 255 250 / 1.0);text-align:left;">[Data Container]<br></div>It primarily functions as a container for storing data. <br><div style="background-color:rgb(245 255 250 / 1.0);text-align:left;">[Not a Base Class]<br></div>It is not the parent class (base class) of all other PHP classes. <br>`,n5:`[Sample]`,n6:`When data is retrieved from a database table, for example, it is stored as an array of individual objects. <br>To use this data as an associative array,<br>you can extract the data by casting it to the array type. <br>In the above step, one $user object is extracted using foreach. <br><div style="background-color:rgb(245 255 250 / 1.0);text-align:left;">$ary = (array)$user;</div>The object is converted to an associative array by casting it as array. <br><br>The tes2 function<br>adds the associative array to an array. <br><div style="background-color:rgb(245 255 250 / 1.0);text-align:left;">$obj =(object)$ary[$i];</div>As shown above, data is extracted sequentially from the array and cast to object. <br><br>Then, data can be extracted from the object using the arrow operator. <br><br>In this way, you can convert between associative arrays and objects by casting them. <br>`,n7:"back",}};function applyTextAll(lang, divIds) {divIds.forEach((id) => applyText(lang, id));}function getText(lang, divId) {return (text[lang] && text[lang][divId]) ?? (text.ja && text.ja[divId]) ?? '';}function applyText(lang, divId) {const el = document.getElementById(divId);if (!el) return;el.innerHTML = getText(lang, divId);}const ary = ["n1", "n2", "n3", "n4", "n5", "n6", "n7"];document.addEventListener("DOMContentLoaded", () => {const toggle = document.getElementById("toggle");const hiddenLang = document.getElementById("lang");const langText = document.getElementById("langText");f4();toggle.addEventListener("change", () => {changeToggle();});});function changeToggle(){const hiddenLang = document.getElementById("lang");if (toggle.checked) {hiddenLang.value = 1;lang=1;} else {hiddenLang.value = 0;lang=0;}displayLangText();applyTextAll(lang==0?"ja":"en", ary);}function displayLangText(){const hiddenLang = document.getElementById("lang");if (hiddenLang.value == 0) {langText.textContent = "現在の言語: 日本語";} else {langText.textContent = "current language: English";}f3();f0();const obj=document.getElementById('lang');if(obj.value==1){toggle.checked=true;const hiddenLang = document.getElementById("lang");hiddenLang.value = 1;}else{toggle.checked=false;}}function f1(value){const obj=document.getElementById('lang');obj.value=value;f0();}function f0(){const obj=document.getElementById('lang');let lang=obj.value;applyTextAll(lang==0?"ja":"en", ary);f4();}function f4(){const obj=document.getElementById('lang');let lang=obj.value;const h1=document.getElementById('h1');const h11=document.getElementById('h11');if(lang==1){h1.style.display="none";h11.style.display="block";}else{h1.style.display="block";h11.style.display="none";}}function f3(){let o1=new URL(window.location.href);let o2=o1.searchParams;let d=o2.get('lang');const hiddenLang = document.getElementById("lang");if(d==1||hiddenLang.value==1){hiddenLang.value=1;}else{hiddenLang.value=0;}}function f2(){const obj=document.getElementById('lang');let lang=obj.value;window.location.href=urlPath();}function urlPath(){const obj=document.getElementById('lang');let lang=obj.value;nextUrlPath="/php/index.html";return nextUrlPath+"?lang=" + lang;}</script></body></html>